현재 market_scanner.py의 종목 선정 기준이 너무 엄격하여 매매 대상이 포착되지 않고 있습니다. 아래와 같이 각 함수별 로직을 '눌림목 매매(Dip Buying)' 관점으로 완화하여 수정해주세요.

1. Universe Filter 수정 (check_universe_filter 함수)
기존의 '모든 조건 AND' 방식을 버리고, "추세는 필수, 나머지는 선택" 방식으로 변경해야 합니다.

Trend Strength (추세 조건) 완화:

기존: ADX > 25 AND (현재가 > 60일선) AND (현재가 > 120일선)

변경: ADX 기준을 20으로 낮추고, 이동평균선 조건은 (현재가 > 20일선 OR 현재가 > 60일선)으로 변경하여 단기 혹은 중기 추세 중 하나만 살아있으면 통과로 처리.

Smart Money (수급 조건) 완화:

기존: 외국인+기관 5일 합산 > 0

변경: 합산이 0보다 크거나, OR (외국인 누적 > 0) OR (기관 누적 > 0)으로 변경. 즉, 메이저 주체 중 한 곳이라도 매수 우위면 통과.

최종 리턴 조건 변경:

기존: 4개 조건 중 50% 이상 만족

변경: Trend 조건은 필수(True)여야 하고, 나머지(수급, 매집, 기본) 조건 중 최소 1개 이상 만족하면 True 반환.

2. 매수 신호 로직 수정 (check_buy_signal 함수)
극단적인 과매도보다는 **'반등의 기미'**를 포착하는 로직으로 변경해주세요.

MFI 과매도 기준 완화:

기존: MFI < 20

변경: MFI 기준을 30 미만으로 상향 조정.

RSI 조건 추가:

추가: MFI 외에 RSI(14) 지표가 35 미만인 경우도 과매도 신호로 추가 (reasons에 추가).

스토캐스틱 골든크로스 범위 확대:

기존: Slow K < 20 에서의 골든크로스

변경: Slow K 40 미만 구간에서 골든크로스 발생 시 매수 신호로 인정 (상승 추세 눌림목 반영).

단기 이평선 돌파 신호 추가 (중요):

추가: 주가가 **5일 이동평균선(MA5)**을 상향 돌파(Golden Cross)하는 경우를 강력한 매수 신호로 추가.

3. API 데이터 파싱 오류 수정 (get_foreign_institution_buy 함수)
현재 한국투자증권 API 응답값 파싱 시, output 딕셔너리에서 키(Key) 값을 잘못 참조하고 있을 가능성이 큽니다.

API 문서를 참고하여 외국인/기관 순매수 수량을 가져오는 키 값이 정확한지 확인하고 수정해주세요. (보통 frgn_ntby_qty, orgn_ntby_qty 등의 키를 사용하나, 응답 구조가 리스트인지 딕셔너리인지 확인 필요)